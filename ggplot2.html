<!DOCTYPE html>
<html>
  <head>
    <title>Visualisation with ggplot2</title>
    <meta charset="utf-8">
    <meta name="author" content="Florian PrivÃ© &amp;" />
    <meta name="date" content="2017-10-19" />
    <link href="libs/remark-css/example.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Visualisation with ggplot2
### Florian PrivÃ© &amp;
### October 19, 2017

---




class: center, middle, inverse
background-image: url(http://hexb.in/vector/ggplot2.svg)
background-size: 50%

---

class: center, middle, inverse

&gt; "The simple graph has brought more information to the data analystâ€™s mind than any other device." --- John Tukey

---

## Sources

- [Chapter *Data Visualisation*](http://r4ds.had.co.nz/data-visualisation.html) of 

&lt;img src="http://r4ds.had.co.nz/cover.png" height="300px" style="display: block; margin: auto;" /&gt;

&lt;!-- - This [workshop on introducting the tidyverse](https://github.com/Cascadia-R/gRadual-intRoduction-tidyverse) --&gt;

- [StackOverflow questions with tag `[ggplot2]`](https://stackoverflow.com/questions/tagged/ggplot2)

---

class: center, middle, inverse

# Introduction

---

## What does *ggplot2* stand for?

--

### A __Grammar of Graphics__!

--

```
ggplot(data = &lt;DATA&gt;) + 
  &lt;GEOM_FUNCTION&gt;(
     mapping = aes(&lt;MAPPINGS&gt;),
     stat = &lt;STAT&gt;, 
     position = &lt;POSITION&gt;
  ) +
  &lt;COORDINATE_FUNCTION&gt; +
  &lt;FACET_FUNCTION&gt;
```

--

&lt;/br&gt;

#### You can uniquely describe any plot as a combination of these 7 parameters.

---

## How long have you known **ggplot2**?

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

--

&lt;blockquote class="twitter-tweet" data-lang="en" align="center"&gt;&lt;p lang="en" dir="ltr"&gt;Happy 10th birthday ggplot2! ðŸŽ‰ðŸŽ‚ðŸ“ŠðŸ“ˆ10 years ago today the first version was accepted to CRAN: &lt;a href="https://t.co/tiXIkqnCcA"&gt;https://t.co/tiXIkqnCcA&lt;/a&gt;&lt;/p&gt;&amp;mdash; Hadley Wickham (@hadleywickham) &lt;a href="https://twitter.com/hadleywickham/status/873556949207535616"&gt;10 juin 2017&lt;/a&gt;&lt;/blockquote&gt;

---

## Why use ggplot2?

&lt;/br&gt;

- Automatic legends, colors, etc.

- Easy superposition, facetting, etc.

- Nice rendering (yet, I don't like the default grey theme).

- **Store any ggplot2 object for modification or future recall.** Super useful for packages.

- Lots of users (less bugs, much help on Stack Overflow).

- Lots of extensions.

- Nice saving option.

---

class: center, middle, inverse
background-image: url(http://spatialanalysis.co.uk/wp-content/uploads/2012/06/flights_sml.jpg)
background-size: 100%

---

class: center, middle, inverse

# Tidy data?

---

## Untidy data




```r
fertilityData
```

```
## # A tibble: 12 x 7
##    `Total fertility rate` `1800` `1801` `1802` `1803` `1804` `1805`
##                    &lt;fctr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1            Afghanistan   7.00   7.00   7.00   7.00   7.00   7.00
##  2                Albania   4.60   4.60   4.60   4.60   4.60   4.60
##  3                Algeria   6.99   6.99   6.99   6.99   6.99   6.99
##  4                 Angola   6.93   6.93   6.93   6.93   6.93   6.93
##  5    Antigua and Barbuda   5.00   5.00   4.99   4.99   4.99   4.98
##  6              Argentina   6.80   6.80   6.80   6.80   6.80   6.80
##  7                Armenia   7.80   7.80   7.81   7.81   7.81   7.82
##  8                  Aruba   5.64   5.64   5.64   5.64   5.64   5.64
##  9              Australia   6.50   6.48   6.46   6.44   6.42   6.40
## 10                Austria   5.10   5.10   5.10   5.10   5.10   5.10
## 11             Azerbaijan   8.10   8.10   8.10   8.10   8.10   8.10
## 12                Bahamas   5.90   5.90   5.90   5.90   5.90   5.90
```


#### How you would plot this data?

---

## Tidy data

&lt;img src="http://r4ds.had.co.nz/images/tidy-1.png" style="display: block; margin: auto;" /&gt;

It is easier to work and reason with

- operations

- manipulation

- visualization

Learn more at http://tidyr.tidyverse.org/articles/tidy-data.html.

---

### Tidy prevthe ious data


```r
library(tidyverse)

(fertilityDataTidy &lt;- fertilityData %&gt;%
   rename(Country = `Total fertility rate`) %&gt;%
   gather(key = "Year", value = "Fertility", -Country))
```

```
## # A tibble: 72 x 3
##                Country  Year Fertility
##                 &lt;fctr&gt; &lt;chr&gt;     &lt;dbl&gt;
##  1         Afghanistan  1800      7.00
##  2             Albania  1800      4.60
##  3             Algeria  1800      6.99
##  4              Angola  1800      6.93
##  5 Antigua and Barbuda  1800      5.00
##  6           Argentina  1800      6.80
##  7             Armenia  1800      7.80
##  8               Aruba  1800      5.64
##  9           Australia  1800      6.50
## 10             Austria  1800      5.10
## # ... with 62 more rows
```

---

### This is easier to plot


```r
ggplot(data = fertilityDataTidy) + 
  geom_point(mapping = aes(x = Year, y = Fertility))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-6-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

class: center, middle, inverse

# Customization

---

## Add colors


```r
ggplot(data = fertilityDataTidy) + 
  geom_point(mapping = aes(x = Year, y = Fertility, 
                           color = Country))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

### Add lines: move 'aes' to the top (1/2)


```r
ggplot(fertilityDataTidy, aes(Year, Fertility, color = Country)) + 
  geom_point() +
  geom_line()
```

```
## geom_path: Each group consists of only one observation. Do you need to
## adjust the group aesthetic?
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

### Add lines: add a group (2/2)


```r
ggplot(fertilityDataTidy, aes(Year, Fertility, color = Country)) + 
  geom_point() +
  geom_line(aes(group = Country))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

### My custom theme: black and white and larger fonts


```r
bigstatsr:::MY_THEME(
  ggplot(fertilityDataTidy, aes(x = Year, y = Fertility, 
                                color = Country)), coeff = 1.2
) + 
  geom_point() +
  geom_line(aes(group = Country))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

### Larger points and lines


```r
bigstatsr:::MY_THEME(
  ggplot(fertilityDataTidy, aes(x = Year, y = Fertility, 
                                color = Country)), coeff = 1.2
) + 
  geom_point(cex = 4) +
  geom_line(aes(group = Country), lwd = 2)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---


```r
bigstatsr:::MY_THEME(
  ggplot(fertilityDataTidy, aes(x = Year, y = Fertility, 
                                color = Country)), coeff = 1.2
) + 
  geom_point(cex = 4) +
  geom_line(aes(group = Country), lwd = 2) +
  theme(aspect.ratio = 0.8, 
        legend.key.width = unit(3, "line"))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="85%" style="display: block; margin: auto;" /&gt;



---

class: center, middle, inverse

# Thanks!

.footnote[Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).]
    </textarea>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {window.dispatchEvent(new Event('resize'));});
(function() {var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler"); if (!r) return; s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }"; d.head.appendChild(s);})();</script>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
